<link href="../../css/agrupador.css" rel="stylesheet" />
<div cg-busy="myPromise" ng-init="init()" resize>
    

<div class="container">
<ul class="nav nav-tabs">
  <li class="active"><a href="#tab_a" data-toggle="tab">Activas</a></li>
  <li><a href="#tab_b" data-toggle="tab">Buscar x Fecha</a></li>
  <li><a href="#tab_c" data-toggle="tab">Buscar Lotes</a></li>
</ul>
<div class="tab-content">
        <div class="tab-pane active" id="tab_a">
            

        <div ng-controller="transferenciaController" class="container">
        <h2>Actualización de transferencias</h2>
         <div id="selEmpresaTransferencia">
                        <div id="selEmpresaLabel">
                            <span id="spanEmpresaLabel"> Seleccione la empresa</span>
                        </div>
                        <div id="selEmpresaCombo">
                            <div class="input-group">
                                <input type="text" class="form-control" ng-model='traeTransferenciaxEmpresa.emp_nombre' aria-label="...">
                                <div class="input-group-btn">
                                    <button id="btnTotalxEmpresa" type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-loading-text="Obteniendo Transferencias..." autocomplete="off">Seleccione <span class="caret"></span></button>
                                    <ul class="dropdown-menu dropdown-menu-right">
                                        <li ng-repeat="empresa in empresas">
                                            <a href="#" ng-click="traeTransferenciaxEmpresa(empresa.emp_idempresa, empresa.emp_nombre,empresa.emp_nombrecto,empresa.rfc, empresa.tipo, empresa.pagoDirecto)">{{empresa.emp_nombre}}</a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- /btn-group -->
                            </div>
                            <!-- /input-group -->
                        </div>
                        <br>

                    <div id="selGridTransferencia">
                        <div class="rows" >
                            <div ui-grid="gridTransferenciaoptions" ui-grid-selection class="gridlotes"></div>
                        </div>
                    </div>  

        </div>
        <div class="clear"></div>

        <div class="container" ng-hide="editatransferencia" id="contentEditarTransferencia">
     <h2>{{traeTransferenciaxEmpresa.emp_nombre}}</h2>
    <p>Una vez aplicada la transferencia no se podra editar</p>
    <table class="table">
        <thead>
            <tr>
                <th>Número de Lote</th>
                <th>Banco Origen</th>
                <th>Banco Destino</th>
                <th>Cantidad</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{transferencia.pal_id_lote_pago}}</td>
                <td>{{transferencia.ptb_id_cuenta_destino}}</td>
                <td>{{transferencia.ptb_id_cuenta_origen}}</td>
                <td><input type="number" ng-model="transferencia.ptb_importe"  value="{{transferencia.ptb_importe}}" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" step="0.01"></td>
            </tr>
          
            <tr>
                <td></td>
                <td></td>
                <td><button type="button" class="btn btn-success" ng-click="AplicaTransferencia(transferencia.ptb_id,transferencia.ptb_importe)" ng-disabled="transferencia.ptb_estatus==2">Aplicar</button></td>
                <td><button type="button" class="btn btn-info" ng-click="EditaTransferencia(transferencia.ptb_id,transferencia.ptb_importe)" ng-disabled="transferencia.ptb_estatus>1">Editar</button></td>
            </tr>
        </tbody>
    </table>
    </div>


    </div>


        </div>
        <div class="tab-pane" id="tab_b">
            <h4>Busqueda x Fecha</h4>
             <div class="row">
                            <div class="col-md-4"><p class="input-group"><input type="text" class="form-control" uib-datepicker-popup ng-model="dtini" is-open="popup1.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" />
                                    <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open1()"><i class="glyphicon glyphicon-calendar"></i></button>
                                  </span></p></div>
                            <div class="col-md-4"><p class="input-group"><input type="text" class="form-control" uib-datepicker-popup ng-model="dtfin" is-open="popup2.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" />
                                    <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open2()"><i class="glyphicon glyphicon-calendar"></i></button>
                                  </span></p></div>
                            <div class="col-md-4"><p class="input-group"><button type="button" class="btn btn-primary" ng-click="BuscarLotesxFecha(dtini,dtfin)" ng-show="buscarLotes">Buscar</button></p></div>
                        </div>
                    <div>
                        <div class="rows" >
                            <div ui-grid="gridLotesoptions" ui-grid-selection class="gridlotes"></div>
                        </div>
                    </div>  

        </div>
        <div class="tab-pane" id="tab_c">
            <h4>Buscar Lotes</h4>
            <div class="row">
                            <div class="col-md-4"><p class="input-group"><input type="text" class="form-control" uib-datepicker-popup ng-model="dtini" is-open="popup1.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" />
                                    <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open1()"><i class="glyphicon glyphicon-calendar"></i></button>
                                  </span></p></div>
                            <div class="col-md-4"><p class="input-group"><input type="text" class="form-control" uib-datepicker-popup ng-model="dtfin" is-open="popup2.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" />
                                    <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open2()"><i class="glyphicon glyphicon-calendar"></i></button>
                                  </span></p></div>
                            <div class="col-md-4"><p class="input-group"><button type="button" class="btn btn-primary" ng-click="BuscarLotesxFecha(dtini,dtfin)" ng-show="buscarLotes">Buscar</button></p></div>
                        </div>
                    <div>
                        <div class="rows" >
                            <div ui-grid="gridLotesoptions" ui-grid-selection class="gridlotes"></div>
                        </div>
                    </div>  

        </div>
       
</div><!-- tab content -->
</div><!-- end of container -->

</div>
